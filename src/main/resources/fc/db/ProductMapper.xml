<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org/DTD Mapper3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="fc.db.ProductMapper">

	<select id="pro" resultType="pDTO" parameterType="pDTO">
		SELECT * FROM product
		<where>
			 <trim suffix=" " suffixOverrides = " and | or">
	            
                <if test="sch!=null and sch!='' and sch!=('all')">
                   proKind = #{sch} and 
                </if>
	            
	            
	         	<if test="start !='' and start!=null">
	               <if test="end !='' and end!=null">
	                  reg_date BETWEEN #{start} AND #{end} and
	               </if>
	            </if>
	         	
	         	<if test="startPrice !='' and startPrice != null">
                <if test="endPrice !='' and endPrice!=null">
	                  sellPrice BETWEEN #{startPrice} AND #{endPrice}
	               </if>
	            </if>
	            
	         </trim>
		</where>
	</select>
	
	<insert id="insert" parameterType="pDTO" >
		<selectKey keyProperty="num" resultType="Integer" order="BEFORE">
			select max(num)+1 from product
		</selectKey>
		insert into product (num,kind,proKind,proName,proDetail,pf1,pf2,pf3,proSize,color,sel,memPoint,supplyPrice,sellPrice,proCnt,reg_date)
		values
		(#{num}, #{kind}, #{proKind}, #{proName}, #{proDetail},#{pf1},#{pf2},#{pf3},#{proSize},#{color},#{sel},#{memPoint},#{supplyPrice},#{sellPrice},#{proCnt},sysdate())
	</insert>
	
	<select id="detail" parameterType="pDTO" resultType="pDTO">
		select * from product where proName = #{proName}
	</select>
	
	<update id="modify" parameterType="pDTO">
		update product set kind = #{kind} , proKind = #{proKind} , proName = #{proName} , 
		proDetail = #{proDetail} , proSize = #{proSize} , pf1 = #{pf1} , pf2 = #{pf2} , pf3 = #{pf3} ,
		color = #{color} , sel = #{sel} , memPoint = #{memPoint} , supplyPrice = #{supplyPrice}, 
		sellPrice = #{sellPrice}
		where proName = #{proName}
	</update>
	

	
	
	
</mapper>